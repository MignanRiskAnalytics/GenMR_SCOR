

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutorial 2: Implementing perils in the GenMR digital template &mdash; GenMR 1.1.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=58fbf978"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Tutorial 1: Generating a virtual environment for the GenMR digital template" href="Tutorial1_DigitalTemplate_environment.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            GenMR
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../rationale.html">Rationale</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../rationale.html#compound-events">Compound events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rationale.html#generic-multi-risk-genmr-framework">Generic Multi-Risk (GenMR) framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rationale.html#past-developments">Past developments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rationale.html#new-developments">New developments</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rationale.html#digital-template">Digital Template</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rationale.html#id18">Past developments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rationale.html#id26">New developments</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rationale.html#tutorials">Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rationale.html#how-to-guides">How-to guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rationale.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../manual.html">Reference manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../manual.html#module-GenMR.environment">GenMR.environment module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#genmr-virtual-environment-generator">GenMR Virtual Environment Generator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#layers-and-related-objects-v1-1-1">Layers and Related Objects (v1.1.1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#planned-additions-v1-1-2">Planned Additions (v1.1.2)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_natLand"><code class="docutils literal notranslate"><span class="pre">EnvLayer_natLand</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_soil"><code class="docutils literal notranslate"><span class="pre">EnvLayer_soil</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_soil.FS_state"><code class="docutils literal notranslate"><span class="pre">EnvLayer_soil.FS_state</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_soil.FS_value"><code class="docutils literal notranslate"><span class="pre">EnvLayer_soil.FS_value</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_soil.wetness"><code class="docutils literal notranslate"><span class="pre">EnvLayer_soil.wetness</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_topo"><code class="docutils literal notranslate"><span class="pre">EnvLayer_topo</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_topo.algo_diamondsquare"><code class="docutils literal notranslate"><span class="pre">EnvLayer_topo.algo_diamondsquare()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_topo.aspect"><code class="docutils literal notranslate"><span class="pre">EnvLayer_topo.aspect</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_topo.coastline_coord"><code class="docutils literal notranslate"><span class="pre">EnvLayer_topo.coastline_coord</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_topo.model_cs_compoundbevel"><code class="docutils literal notranslate"><span class="pre">EnvLayer_topo.model_cs_compoundbevel()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_topo.model_fr_diamondsquare"><code class="docutils literal notranslate"><span class="pre">EnvLayer_topo.model_fr_diamondsquare()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_topo.model_rv_dampedsine"><code class="docutils literal notranslate"><span class="pre">EnvLayer_topo.model_rv_dampedsine()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_topo.model_th_ellipsoid"><code class="docutils literal notranslate"><span class="pre">EnvLayer_topo.model_th_ellipsoid()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_topo.model_vo_cone"><code class="docutils literal notranslate"><span class="pre">EnvLayer_topo.model_vo_cone()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_topo.river_coord"><code class="docutils literal notranslate"><span class="pre">EnvLayer_topo.river_coord</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_topo.slope"><code class="docutils literal notranslate"><span class="pre">EnvLayer_topo.slope</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_urbLand"><code class="docutils literal notranslate"><span class="pre">EnvLayer_urbLand</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_urbLand.bldg_roofpitch"><code class="docutils literal notranslate"><span class="pre">EnvLayer_urbLand.bldg_roofpitch</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_urbLand.bldg_type"><code class="docutils literal notranslate"><span class="pre">EnvLayer_urbLand.bldg_type</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_urbLand.bldg_value"><code class="docutils literal notranslate"><span class="pre">EnvLayer_urbLand.bldg_value</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_urbLand.calc_Pr_urbanise"><code class="docutils literal notranslate"><span class="pre">EnvLayer_urbLand.calc_Pr_urbanise()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_urbLand.get_S_urban"><code class="docutils literal notranslate"><span class="pre">EnvLayer_urbLand.get_S_urban()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_urbLand.get_d4mkd"><code class="docutils literal notranslate"><span class="pre">EnvLayer_urbLand.get_d4mkd()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_urbLand.get_state_built"><code class="docutils literal notranslate"><span class="pre">EnvLayer_urbLand.get_state_built()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_urbLand.infiltration"><code class="docutils literal notranslate"><span class="pre">EnvLayer_urbLand.infiltration</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_urbLand.roadNet_coord"><code class="docutils literal notranslate"><span class="pre">EnvLayer_urbLand.roadNet_coord</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual.html#GenMR.environment.EnvLayer_urbLand.transform_landUse"><code class="docutils literal notranslate"><span class="pre">EnvLayer_urbLand.transform_landUse()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.environment.EnvObj_roadNetwork"><code class="docutils literal notranslate"><span class="pre">EnvObj_roadNetwork</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.environment.RasterGrid"><code class="docutils literal notranslate"><span class="pre">RasterGrid</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.environment.calc_FS"><code class="docutils literal notranslate"><span class="pre">calc_FS()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.environment.calc_coord_river_dampedsine"><code class="docutils literal notranslate"><span class="pre">calc_coord_river_dampedsine()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.environment.calc_topo_attributes"><code class="docutils literal notranslate"><span class="pre">calc_topo_attributes()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.environment.downscale_RasterGrid"><code class="docutils literal notranslate"><span class="pre">downscale_RasterGrid()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.environment.plot_EnvLayer_attr"><code class="docutils literal notranslate"><span class="pre">plot_EnvLayer_attr()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.environment.plot_EnvLayers"><code class="docutils literal notranslate"><span class="pre">plot_EnvLayers()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../manual.html#module-GenMR.utils">GenMR.utils module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#genmr-utility-functions">GenMR Utility Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.add0s_iter"><code class="docutils literal notranslate"><span class="pre">add0s_iter()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.cmap_peril"><code class="docutils literal notranslate"><span class="pre">cmap_peril()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.col_peril"><code class="docutils literal notranslate"><span class="pre">col_peril()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.col_state_h"><code class="docutils literal notranslate"><span class="pre">col_state_h()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.fetch_A0"><code class="docutils literal notranslate"><span class="pre">fetch_A0()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.flatten_list"><code class="docutils literal notranslate"><span class="pre">flatten_list()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.get_data"><code class="docutils literal notranslate"><span class="pre">get_data()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.get_neighborhood_ind"><code class="docutils literal notranslate"><span class="pre">get_neighborhood_ind()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.get_net_coord"><code class="docutils literal notranslate"><span class="pre">get_net_coord()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.incrementing"><code class="docutils literal notranslate"><span class="pre">incrementing()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.init_io"><code class="docutils literal notranslate"><span class="pre">init_io()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.load_json2dict"><code class="docutils literal notranslate"><span class="pre">load_json2dict()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.load_pickle2class"><code class="docutils literal notranslate"><span class="pre">load_pickle2class()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.marker_peril"><code class="docutils literal notranslate"><span class="pre">marker_peril()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.norm_z"><code class="docutils literal notranslate"><span class="pre">norm_z</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.partitioning"><code class="docutils literal notranslate"><span class="pre">partitioning()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.pooling"><code class="docutils literal notranslate"><span class="pre">pooling()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.save_class2pickle"><code class="docutils literal notranslate"><span class="pre">save_class2pickle()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual.html#GenMR.utils.save_dict2json"><code class="docutils literal notranslate"><span class="pre">save_dict2json()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Tutorial1_DigitalTemplate_environment.html">Tutorial 1: Environment generation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Tutorial1_DigitalTemplate_environment.html#natural-environment-generation">1. Natural environment generation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Tutorial1_DigitalTemplate_environment.html#grid-definition">1.1. Grid definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="Tutorial1_DigitalTemplate_environment.html#natural-peril-definition-for-environmental-objects">1.2. Natural peril definition (for environmental objects)</a></li>
<li class="toctree-l3"><a class="reference internal" href="Tutorial1_DigitalTemplate_environment.html#generating-the-topography-soil-and-land-layers">1.3. Generating the topography, soil, and land layers</a></li>
<li class="toctree-l3"><a class="reference internal" href="Tutorial1_DigitalTemplate_environment.html#environmental-layer-properties-and-attribute-plotting">1.4. Environmental layer properties (and attribute plotting)</a></li>
<li class="toctree-l3"><a class="reference internal" href="Tutorial1_DigitalTemplate_environment.html#a-note-on-environmental-layer-downscaling">1.5. A note on environmental layer downscaling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Tutorial1_DigitalTemplate_environment.html#technological-environment-generation">2. Technological environment generation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Tutorial1_DigitalTemplate_environment.html#generating-the-urban-land-layer-and-road-network-object">2.1. Generating the urban land layer (and road network object)</a></li>
<li class="toctree-l3"><a class="reference internal" href="Tutorial1_DigitalTemplate_environment.html#environmental-layer-properties">2.2. Environmental layer properties</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Tutorial1_DigitalTemplate_environment.html#references">References</a></li>
<li class="toctree-l2"><a class="reference internal" href="Tutorial1_DigitalTemplate_environment.html#appendix">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial 2: Peril implementation (in construction)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#probabilistic-hazard-assessment">1. Probabilistic hazard assessment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#peril-source-definition">1.1. Peril source definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stochastic-event-set-generation">1.2. Stochastic event set generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#intensity-footprint-catalogue-generation">1.3. Intensity footprint catalogue generation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#from-analytical-expressions-threshold-models">1.3.1. From analytical expressions &amp; threshold models</a></li>
<li class="toctree-l4"><a class="reference internal" href="#from-numerical-models-cellular-automata">1.3.2. From numerical models (cellular automata)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#references">References</a></li>
<li class="toctree-l2"><a class="reference internal" href="#appendix">Appendix</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GenMR</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Tutorial 2: Implementing perils in the GenMR digital template</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/notebooks/Tutorial2_DigitalTemplate_perils.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="tutorial-2-implementing-perils-in-the-genmr-digital-template">
<h1>Tutorial 2: Implementing perils in the GenMR digital template<a class="headerlink" href="#tutorial-2-implementing-perils-in-the-genmr-digital-template" title="Link to this heading"></a></h1>
<p><strong>Author:</strong> Arnaud Mignan, Mignan Risk Analytics GmbH<br />
<strong>Version:</strong> 0.1<br />
<strong>Last Updated:</strong> 2025-11-11<br />
<strong>License:</strong> AGPL-3, https://opensource.org/license/agpl-v3</p>
<p>Once a virtual environment has been generated (see previous tutorial), stochastic events can be modelled to populate it. Table 1 lists the perils so far considered in version 1.1.1 as well as the ones to be added in the near future (v. 1.1.2).</p>
<br>
<center><small><b>Tab. 1.</b> List of perils with identifiers (ID) according to <a href='https://www.cambridge.org/highereducation/books/introduction-to-catastrophe-risk-modelling/A3A5B5FB990921422BFEBB07734BF869#overview' target='_blank'>Mignan (2024:tab.1.7)</a>.</small></center>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p>ID</p></th>
<th class="head text-left"><p>Peril</p></th>
<th class="head text-left"><p>Peril type</p></th>
<th class="head text-left"><p>Source class</p></th>
<th class="head text-left"><p>Event size</p></th>
<th class="head text-left"><p>Intensity class</p></th>
<th class="head text-left"><p>Intensity measure</p></th>
<th class="head text-left"><p>Status<sup>†</sup></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p></p></td>
<td class="text-left"><p><strong>NATURAL</strong></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AI</span></code></p></td>
<td class="text-left"><p>Asteroid impact</p></td>
<td class="text-left"><p>Primary</p></td>
<td class="text-left"><p>Point</p></td>
<td class="text-left"><p>Kinetic energy (kt)</p></td>
<td class="text-left"><p>Analytical</p></td>
<td class="text-left"><p>Overpressure (kPa)</p></td>
<td class="text-left"><p><span style="color: green">✓<span></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Dr</span></code></p></td>
<td class="text-left"><p>Drought</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p><span style="color: orange">✗<span></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">EQ</span></code></p></td>
<td class="text-left"><p>Earthquake</p></td>
<td class="text-left"><p>Primary</p></td>
<td class="text-left"><p>Line</p></td>
<td class="text-left"><p>Magnitude</p></td>
<td class="text-left"><p>Analytical</p></td>
<td class="text-left"><p>Peak ground acceleration (m/s<span class="math notranslate nohighlight">\(^2\)</span>)</p></td>
<td class="text-left"><p><span style="color: green">✓<span></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">FF</span></code></p></td>
<td class="text-left"><p>Fluvial flood</p></td>
<td class="text-left"><p>Secondary (to <code class="docutils literal notranslate"><span class="pre">RS</span></code>)</p></td>
<td class="text-left"><p>Point</p></td>
<td class="text-left"><p>Peak flow</p></td>
<td class="text-left"><p>Cellular automaton</p></td>
<td class="text-left"><p>Inundation depth (m)</p></td>
<td class="text-left"><p><span style="color: green">✓<span></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">HW</span></code></p></td>
<td class="text-left"><p>Heatwave</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p><span style="color: orange">✗<span></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Li</span></code></p></td>
<td class="text-left"><p>Lightning</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p><span style="color: orange">✗<span></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">LS</span></code></p></td>
<td class="text-left"><p>Landslide</p></td>
<td class="text-left"><p>Secondary (to <code class="docutils literal notranslate"><span class="pre">RS</span></code>)</p></td>
<td class="text-left"><p>Diffuse</p></td>
<td class="text-left"><p>Area (km<span class="math notranslate nohighlight">\(^2\)</span>)</p></td>
<td class="text-left"><p>Cellular automaton</p></td>
<td class="text-left"><p>Thickness (m)</p></td>
<td class="text-left"><p><span style="color: green">✓<span></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">PI</span></code></p></td>
<td class="text-left"><p>Pest infestation</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p><span style="color: orange">✗<span></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">RS</span></code></p></td>
<td class="text-left"><p>Rainstorm</p></td>
<td class="text-left"><p>Primary (invisible<span class="math notranslate nohighlight">\(^*\)</span>)</p></td>
<td class="text-left"><p>Area</p></td>
<td class="text-left"><p>Rain intensity (mm/hr)</p></td>
<td class="text-left"><p>Threshold</p></td>
<td class="text-left"><p>-</p></td>
<td class="text-left"><p><span style="color: green">✓<span></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">SS</span></code></p></td>
<td class="text-left"><p>Storm surge</p></td>
<td class="text-left"><p>Secondary (to <code class="docutils literal notranslate"><span class="pre">WS</span></code>)</p></td>
<td class="text-left"><p>Line</p></td>
<td class="text-left"><p>Coastal surge height (m)</p></td>
<td class="text-left"><p>Threshold</p></td>
<td class="text-left"><p>Inundation depth (m)</p></td>
<td class="text-left"><p><span style="color: green">✓<span></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">TC</span></code></p></td>
<td class="text-left"><p>Tropical cyclone</p></td>
<td class="text-left"><p>Primary</p></td>
<td class="text-left"><p>Track</p></td>
<td class="text-left"><p>Max. wind speed (m/s)</p></td>
<td class="text-left"><p>Analytical</p></td>
<td class="text-left"><p>Max. wind speed (m/s)</p></td>
<td class="text-left"><p><span style="color: green">✓<span></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">To</span></code></p></td>
<td class="text-left"><p>Tornado</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p><span style="color: orange">✗<span></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">VE</span></code></p></td>
<td class="text-left"><p>Volcanic eruption</p></td>
<td class="text-left"><p>Primary</p></td>
<td class="text-left"><p>Point</p></td>
<td class="text-left"><p>Volume erupted (km<span class="math notranslate nohighlight">\(^3\)</span>)</p></td>
<td class="text-left"><p>Analytical</p></td>
<td class="text-left"><p>Ash load (kPa)</p></td>
<td class="text-left"><p><span style="color: green">✓<span></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">WF</span></code></p></td>
<td class="text-left"><p>Wildfire</p></td>
<td class="text-left"><p>Primary</p></td>
<td class="text-left"><p>Diffuse</p></td>
<td class="text-left"><p>Burnt area</p></td>
<td class="text-left"><p>Cellular automaton</p></td>
<td class="text-left"><p>Burnt/not burnt</p></td>
<td class="text-left"><p><span style="color: green">✓<span></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">WS</span></code></p></td>
<td class="text-left"><p>Windstorm</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p><span style="color: orange">✗<span></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p></p></td>
<td class="text-left"><p><strong>TECHNOLOGICAL</strong></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">BO</span></code></p></td>
<td class="text-left"><p>Blackout</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p><span style="color: orange">✗<span></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Ex</span></code></p></td>
<td class="text-left"><p>Explosion (industrial)</p></td>
<td class="text-left"><p>Primary</p></td>
<td class="text-left"><p>Point</p></td>
<td class="text-left"><p>TNT mass (kt)</p></td>
<td class="text-left"><p>Analytical</p></td>
<td class="text-left"><p>Overpressure <span class="math notranslate nohighlight">\(P\)</span> (kPa)</p></td>
<td class="text-left"><p><span style="color: green">✓<span></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p></p></td>
<td class="text-left"><p><strong>SOCIO-ECONOMIC</strong></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">BI</span></code></p></td>
<td class="text-left"><p>Business interruption</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p><span style="color: orange">✗<span></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Sf</span></code></p></td>
<td class="text-left"><p>Public service failure</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p><span style="color: orange">✗<span></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">SU</span></code></p></td>
<td class="text-left"><p>Social unrest</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p><span style="color: orange">✗<span></p></td>
</tr>
</tbody>
</table>
<p><small><span class="math notranslate nohighlight">\(^*\)</span> Rainstorm is called an ‘invisible peril’ (following <a href='https://link.springer.com/article/10.1007/s11069-014-1178-4' target='_blank'>Mignan et al., 2014</a>) since it does not cause any direct damage in the present framework. It is implemented as both the landslide and fluvial flood triggering mechanism.<br>
<sup>†</sup> To be included in current version 1.1.1 (<span style="color: green">✓</span>), planned for v.1.1.2 (<span style="color: orange">✗</span>).</small></p>
<p>ADD TEXT</p>
<p>Figure 1 illustrates the relationship between some stochastic event footprints and the underlying environment:</p>
<br>
<figure class="align-center" id="fig-digitaltemplate">
<a class="reference internal image-reference" href="../_images/digitaltemplate_ev_rayshader.png"><img alt="../_images/digitaltemplate_ev_rayshader.png" src="../_images/digitaltemplate_ev_rayshader.png" style="width: 500px;" />
</a>
<figcaption>
<p><span class="caption-text"><strong>Fig. 1.</strong> One instance of the GenMR digital template (default parameterisation) with an example of event hazard intensity footprint and loss footprint (here for a large earthquake). Simulation rendered using <a class="reference external" href="https://www.rayshader.com/">Rayshader</a> (Morgan-Wall, 2022).</span><a class="headerlink" href="#fig-digitaltemplate" title="Link to this image"></a></p>
</figcaption>
</figure>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">copy</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1">#import warnings </span>
<span class="c1">#warnings.filterwarnings(&#39;ignore&#39;)   # commented, try to remove all warnings</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">GenMR</span><span class="w"> </span><span class="kn">import</span> <span class="n">perils</span> <span class="k">as</span> <span class="n">GenMR_perils</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">GenMR</span><span class="w"> </span><span class="kn">import</span> <span class="n">environment</span> <span class="k">as</span> <span class="n">GenMR_env</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">GenMR</span><span class="w"> </span><span class="kn">import</span> <span class="n">utils</span> <span class="k">as</span> <span class="n">GenMR_utils</span>


<span class="c1"># load inputs (i.e., outputs from Tutorial 1)</span>
<span class="n">file_src</span> <span class="o">=</span> <span class="s1">&#39;src.pkl&#39;</span>
<span class="n">file_topoLayer</span> <span class="o">=</span> <span class="s1">&#39;envLayer_topo.pkl&#39;</span>
<span class="n">file_soilLayer</span> <span class="o">=</span> <span class="s1">&#39;envLayer_soil.pkl&#39;</span>
<span class="n">file_urbLandLayer</span> <span class="o">=</span> <span class="s1">&#39;envLayer_urbLand.pkl&#39;</span>
<span class="n">src</span> <span class="o">=</span> <span class="n">GenMR_utils</span><span class="o">.</span><span class="n">load_pickle2class</span><span class="p">(</span><span class="s1">&#39;/io/&#39;</span> <span class="o">+</span> <span class="n">file_src</span><span class="p">)</span>
<span class="n">grid</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">grid</span><span class="p">)</span>
<span class="n">topoLayer</span> <span class="o">=</span> <span class="n">GenMR_utils</span><span class="o">.</span><span class="n">load_pickle2class</span><span class="p">(</span><span class="s1">&#39;/io/&#39;</span> <span class="o">+</span> <span class="n">file_topoLayer</span><span class="p">)</span>
<span class="n">soilLayer</span> <span class="o">=</span> <span class="n">GenMR_utils</span><span class="o">.</span><span class="n">load_pickle2class</span><span class="p">(</span><span class="s1">&#39;/io/&#39;</span> <span class="o">+</span> <span class="n">file_soilLayer</span><span class="p">)</span>
<span class="n">urbLandLayer</span> <span class="o">=</span> <span class="n">GenMR_utils</span><span class="o">.</span><span class="n">load_pickle2class</span><span class="p">(</span><span class="s1">&#39;/io/&#39;</span> <span class="o">+</span> <span class="n">file_urbLandLayer</span><span class="p">)</span>

<span class="n">GenMR_env</span><span class="o">.</span><span class="n">plot_EnvLayers</span><span class="p">([</span><span class="n">topoLayer</span><span class="p">,</span> <span class="n">soilLayer</span><span class="p">,</span> <span class="n">urbLandLayer</span><span class="p">],</span> <span class="n">file_ext</span> <span class="o">=</span> <span class="s1">&#39;jpg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/arnaudmignan/Documents/GmbH_MRA/2_fundedR&amp;D/2025-2027_GenMR_SCOR/GenMR_SCOR/GenMR/environment.py:503: RuntimeWarning: divide by zero encountered in divide
  FS = (par[&#39;Ceff_Pa&#39;] / (par[&#39;rho_kg/m3&#39;] * GenMR_utils.g_earth * h) + np.cos(slope * np.pi/180) * \
</pre></div>
</div>
<img alt="../_images/56ef59ffc5bc94f85a4681cdb824a5a8bd2536067ffcc35662c03866f11386af.png" src="../_images/56ef59ffc5bc94f85a4681cdb824a5a8bd2536067ffcc35662c03866f11386af.png" />
</div>
</div>
<p>Note that the configuration of the digital template environment may be changed through Tutorial 1.</p>
<section id="probabilistic-hazard-assessment">
<h2>1. Probabilistic hazard assessment<a class="headerlink" href="#probabilistic-hazard-assessment" title="Link to this heading"></a></h2>
<p>Event independence is assumed, except for ad-hoc 1-to-1 peril deterministic triggering (e.g., a tropical cyclone triggers a storm surge)…</p>
<section id="peril-source-definition">
<h3>1.1. Peril source definition<a class="headerlink" href="#peril-source-definition" title="Link to this heading"></a></h3>
<p>Source characteristics were defined in Tutorial 1 for earthquakes, volcanic eruptions and fluvial floods (due to environmental layer dependence on these perils). Additional localised peril sources (<code class="docutils literal notranslate"><span class="pre">AI</span></code>, <code class="docutils literal notranslate"><span class="pre">SS</span></code>, <code class="docutils literal notranslate"><span class="pre">TC</span></code>) will now be introduced, which have no direct impact on the environmental layers currently defined.</p>
<p>TO DEVELOP/REWRITE</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">src</span><span class="o">.</span><span class="n">par</span><span class="p">[</span><span class="s1">&#39;perils&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;AI&#39;</span><span class="p">,</span><span class="s1">&#39;EQ&#39;</span><span class="p">,</span><span class="s1">&#39;RS&#39;</span><span class="p">,</span><span class="s1">&#39;TC&#39;</span><span class="p">,</span><span class="s1">&#39;VE&#39;</span><span class="p">,</span> <span class="s1">&#39;FF&#39;</span><span class="p">,</span><span class="s1">&#39;LS&#39;</span><span class="p">,</span><span class="s1">&#39;SS&#39;</span><span class="p">]</span>    <span class="c1"># IMPORTANT: primary perils come first</span>
<span class="n">src</span><span class="o">.</span><span class="n">par</span><span class="p">[</span><span class="s1">&#39;rdm_seed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span>      <span class="c1"># None or integer (for stochastic sources: AI, TC)</span>


<span class="c1"># define new perils</span>
<span class="n">src</span><span class="o">.</span><span class="n">par</span><span class="p">[</span><span class="s1">&#39;AI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="s1">&#39;impact&#39;</span><span class="p">,</span> <span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>     <span class="c1"># random uniform asteroid impacts (point sources)</span>
<span class="n">src</span><span class="o">.</span><span class="n">par</span><span class="p">[</span><span class="s1">&#39;LS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="s1">&#39;terrain&#39;</span><span class="p">}</span>
<span class="n">src</span><span class="o">.</span><span class="n">par</span><span class="p">[</span><span class="s1">&#39;RS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="s1">&#39;atmosphere&#39;</span><span class="p">}</span>          <span class="c1"># as trigger of landslides</span>

<span class="n">src</span><span class="o">.</span><span class="n">par</span><span class="p">[</span><span class="s1">&#39;SS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="s1">&#39;coastline&#39;</span><span class="p">}</span>
<span class="n">SS_src_xi</span><span class="p">,</span> <span class="n">SS_src_yi</span> <span class="o">=</span> <span class="n">topoLayer</span><span class="o">.</span><span class="n">coastline_coord</span>
<span class="n">src</span><span class="o">.</span><span class="n">SS_char</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">SS_src_xi</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">SS_src_yi</span><span class="p">}</span>

<span class="n">src</span><span class="o">.</span><span class="n">par</span><span class="p">[</span><span class="s1">&#39;TC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="s1">&#39;stormtrack&#39;</span><span class="p">,</span> <span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>  <span class="c1"># pseudo-random track sources moving from West to East</span>
                 <span class="s1">&#39;npt&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>      <span class="c1"># number of points along track, which crosses the grid from West to East</span>
                 <span class="s1">&#39;max_dev&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>   <span class="c1"># random uniform deviation along the y-axis at each track point</span>
                 <span class="s1">&#39;bin_km&#39;</span><span class="p">:</span> <span class="mf">1.</span><span class="p">}</span>   <span class="c1"># track spatial resolution</span>

<span class="n">GenMR_perils</span><span class="o">.</span><span class="n">plot_src</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">hillshading_z</span> <span class="o">=</span> <span class="n">topoLayer</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="n">file_ext</span> <span class="o">=</span> <span class="s1">&#39;jpg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/cdb995c273a83fe493f2bd512cf27ec0b4b38f275030e72d764fe32afe458feb.png" src="../_images/cdb995c273a83fe493f2bd512cf27ec0b4b38f275030e72d764fe32afe458feb.png" />
</div>
</div>
<p><strong>NOTE:</strong> Hazard intensity footprints are modeled based on the sources shown in the map above. For stochastic sources (<code class="docutils literal notranslate"><span class="pre">AI</span></code>, <code class="docutils literal notranslate"><span class="pre">TC</span></code>), rerunning the previous cell will produce different configurations unless <code class="docutils literal notranslate"><span class="pre">rdm_seed</span></code> is fixed.</p>
</section>
<section id="stochastic-event-set-generation">
<h3>1.2. Stochastic event set generation<a class="headerlink" href="#stochastic-event-set-generation" title="Link to this heading"></a></h3>
<p>The stochastic event set (or event table) consists of a list of events per peril with identifier <code class="docutils literal notranslate"><span class="pre">evID</span></code>, size <code class="docutils literal notranslate"><span class="pre">S</span></code>, and rate <code class="docutils literal notranslate"><span class="pre">lbd</span></code>. Two types of perils will be considered: primary perils for which the rate of occurrence must be assessed and secondary perils which will be assumed-in this tutorial-to occur in pair with their triggers. In this case, to keep working with an event table (and not a simulation table and adjacency matrix of interactions; see future Tutorial 3), each trigger event here has a probability of one to cause one target event. Note also that <code class="docutils literal notranslate"><span class="pre">Ex</span></code>, <code class="docutils literal notranslate"><span class="pre">FF</span></code> and <code class="docutils literal notranslate"><span class="pre">WF</span></code> events are not implemented in the stochastic set but will be considered at a later stage to illustrate specific aspects associated to the virtual region. TO DO: add explosions here already…</p>
<ul class="simple">
<li><p>Primary perils: <code class="docutils literal notranslate"><span class="pre">AI</span></code>, <code class="docutils literal notranslate"><span class="pre">EQ</span></code>, <code class="docutils literal notranslate"><span class="pre">RS</span></code>, <code class="docutils literal notranslate"><span class="pre">TC</span></code>, <code class="docutils literal notranslate"><span class="pre">VE</span></code></p></li>
<li><p>Secondary perils: <code class="docutils literal notranslate"><span class="pre">LS</span></code> triggered by <code class="docutils literal notranslate"><span class="pre">RS</span></code> and <code class="docutils literal notranslate"><span class="pre">SS</span></code> triggered by <code class="docutils literal notranslate"><span class="pre">TC</span></code></p></li>
</ul>
<p>This is parameterised in the dictionary <code class="docutils literal notranslate"><span class="pre">sizeDistr</span></code> with:</p>
<ul class="simple">
<li><p>Event size incrementation according <code class="docutils literal notranslate"><span class="pre">Smin</span></code>, <code class="docutils literal notranslate"><span class="pre">Smax</span></code> and <code class="docutils literal notranslate"><span class="pre">Sbin</span></code> with binning in <code class="docutils literal notranslate"><span class="pre">linear</span></code> or <code class="docutils literal notranslate"><span class="pre">log</span></code> scale.</p></li>
<li><p>Event size distribution modelled by one of 3 functions: power-law (Mignan, 2024:Eq. 2.38), exponential law (Mignan, 2024:Eq. 2.39), or Generalised Pareto Distribution (GPD, Mignan, 2024:Eq. 2.50).</p></li>
<li><p>Rates of the digital template are for most perils simply calibrated by taking the ratio of the region area to the area used to obtain event productivity parameters in the Mignan (2024) textbook (e.g., global or continental United States, CONUS). This is an oversimplification assuming an homogeneous spatial distribution of events but is used as a straightforward way to define rates for the present ad-hoc region. DEVELOP: add more regional options…</p></li>
</ul>
<p>ADD summary table…</p>
<p>All calculations take place in the function <code class="docutils literal notranslate"><span class="pre">gen_evset()</span></code>.</p>
<p><strong>NOTE 1:</strong> The maximum possible event size <code class="docutils literal notranslate"><span class="pre">Smax</span></code> is defined by the user for all perils except for earthquakes, which maximum magnitude (<code class="docutils literal notranslate"><span class="pre">src.EQ_char['srcMmax']</span></code>) is constrained by the maximum fault length, according to an empirical relationship (Mignan, 2024:fig. 2.6b).</p>
<p><strong>NOTE 2:</strong> The number of stochastic events is taken as the number of sources when they are themselves stochastic (i.e., <code class="docutils literal notranslate"><span class="pre">AI</span></code>, <code class="docutils literal notranslate"><span class="pre">TC</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">EQ_Mmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">EQ_char</span><span class="p">[</span><span class="s1">&#39;srcMmax&#39;</span><span class="p">])</span>

<span class="n">sizeDistr</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;primary&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;AI&#39;</span><span class="p">,</span><span class="s1">&#39;EQ&#39;</span><span class="p">,</span><span class="s1">&#39;RS&#39;</span><span class="p">,</span><span class="s1">&#39;TC&#39;</span><span class="p">,</span><span class="s1">&#39;VE&#39;</span><span class="p">,</span><span class="s1">&#39;WF&#39;</span><span class="p">,</span> <span class="s1">&#39;Ex&#39;</span><span class="p">],</span>
    <span class="s1">&#39;secondary&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;FF&#39;</span><span class="p">,</span> <span class="s1">&#39;LS&#39;</span><span class="p">,</span><span class="s1">&#39;SS&#39;</span><span class="p">],</span>
    <span class="c1"># primary perils</span>
    <span class="s1">&#39;AI&#39;</span><span class="p">:{</span>
        <span class="s1">&#39;Nstoch&#39;</span><span class="p">:</span> <span class="n">src</span><span class="o">.</span><span class="n">par</span><span class="p">[</span><span class="s1">&#39;AI&#39;</span><span class="p">][</span><span class="s1">&#39;N&#39;</span><span class="p">],</span> <span class="s1">&#39;Sunit&#39;</span><span class="p">:</span> <span class="s1">&#39;Bolide energy $E$ (kton)&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Smin&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;Smax&#39;</span><span class="p">:</span> <span class="mf">1e3</span><span class="p">,</span> <span class="s1">&#39;Sbin&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Sscale&#39;</span><span class="p">:</span> <span class="s1">&#39;log&#39;</span><span class="p">,</span>
        <span class="s1">&#39;distr&#39;</span><span class="p">:</span> <span class="s1">&#39;powerlaw&#39;</span><span class="p">,</span> <span class="s1">&#39;region&#39;</span><span class="p">:</span> <span class="s1">&#39;global&#39;</span><span class="p">,</span> <span class="s1">&#39;a0&#39;</span><span class="p">:</span> <span class="mf">.5677</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mf">.9</span>       <span class="c1"># see Sect. 2.3.1</span>
    <span class="p">},</span>
    <span class="s1">&#39;EQ&#39;</span><span class="p">:{</span>
        <span class="s1">&#39;Nstoch&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;Sunit&#39;</span><span class="p">:</span> <span class="s1">&#39;Magnitude $M$&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Smin&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;Smax&#39;</span><span class="p">:</span> <span class="n">EQ_Mmax</span><span class="p">,</span> <span class="s1">&#39;Sbin&#39;</span><span class="p">:</span> <span class="mf">.1</span><span class="p">,</span> <span class="s1">&#39;Sscale&#39;</span><span class="p">:</span> <span class="s1">&#39;linear&#39;</span><span class="p">,</span>
        <span class="s1">&#39;distr&#39;</span><span class="p">:</span> <span class="s1">&#39;exponential&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mf">1.</span>                  <span class="c1"># i.e., one M = a EQ per year (given b = 1)</span>
    <span class="p">},</span>
    <span class="s1">&#39;RS&#39;</span><span class="p">:{</span>
        <span class="s1">&#39;Nstoch&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Sunit&#39;</span><span class="p">:</span> <span class="s1">&#39;Water column (mm/hr)&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Smin&#39;</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span> <span class="s1">&#39;Smax&#39;</span><span class="p">:</span> <span class="mi">125</span><span class="p">,</span> <span class="s1">&#39;Sbin&#39;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;Sscale&#39;</span><span class="p">:</span> <span class="s1">&#39;linear&#39;</span><span class="p">,</span>
        <span class="s1">&#39;distr&#39;</span><span class="p">:</span> <span class="s1">&#39;GPD&#39;</span><span class="p">,</span> <span class="s1">&#39;region&#39;</span><span class="p">:</span> <span class="s1">&#39;CONUS&#39;</span><span class="p">,</span> <span class="s1">&#39;mu&#39;</span><span class="p">:</span> <span class="mf">50.</span><span class="p">,</span> <span class="s1">&#39;xi&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">.051</span><span class="p">,</span> <span class="s1">&#39;sigma&#39;</span><span class="p">:</span> <span class="mf">11.8</span><span class="p">,</span> <span class="s1">&#39;Lbdmin0&#39;</span><span class="p">:</span> <span class="mf">522.</span> <span class="c1"># see Sect. 2.3.2</span>
    <span class="p">},</span>
    <span class="s1">&#39;TC&#39;</span><span class="p">:{</span>
        <span class="s1">&#39;Nstoch&#39;</span><span class="p">:</span> <span class="n">src</span><span class="o">.</span><span class="n">par</span><span class="p">[</span><span class="s1">&#39;TC&#39;</span><span class="p">][</span><span class="s1">&#39;N&#39;</span><span class="p">],</span> <span class="s1">&#39;Sunit&#39;</span><span class="p">:</span> <span class="s1">&#39;Max. wind speed (m/s)&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Smin&#39;</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="s1">&#39;Smax&#39;</span><span class="p">:</span> <span class="mi">65</span><span class="p">,</span> <span class="s1">&#39;Sbin&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;Sscale&#39;</span><span class="p">:</span> <span class="s1">&#39;linear&#39;</span><span class="p">,</span>
        <span class="s1">&#39;distr&#39;</span><span class="p">:</span> <span class="s1">&#39;GPD&#39;</span><span class="p">,</span> <span class="s1">&#39;region&#39;</span><span class="p">:</span> <span class="s1">&#39;global&#39;</span><span class="p">,</span> <span class="s1">&#39;mu&#39;</span><span class="p">:</span> <span class="mf">33.</span><span class="p">,</span> <span class="s1">&#39;xi&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">.280</span><span class="p">,</span> <span class="s1">&#39;sigma&#39;</span><span class="p">:</span> <span class="mf">17.8</span><span class="p">,</span><span class="s1">&#39;Lbdmin0&#39;</span><span class="p">:</span> <span class="mf">43.9</span>  <span class="c1"># IBTrACS fit</span>
<span class="c1">#        , &#39;Lbdmin&#39;: .1      # overwrites Lbdmin derived from Lbdmin0 to directly choose rate(&gt;=Smin) = Lbdmin</span>
    <span class="p">},</span>
    <span class="s1">&#39;VE&#39;</span><span class="p">:{</span>
        <span class="s1">&#39;Nstoch&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Sunit&#39;</span><span class="p">:</span> <span class="s1">&#39;Ash volume (km$^3$)&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Smin&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Smax&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;Sbin&#39;</span><span class="p">:</span> <span class="mf">.5</span><span class="p">,</span> <span class="s1">&#39;Sscale&#39;</span><span class="p">:</span> <span class="s1">&#39;log&#39;</span><span class="p">,</span>
        <span class="s1">&#39;distr&#39;</span><span class="p">:</span> <span class="s1">&#39;powerlaw&#39;</span><span class="p">,</span> <span class="s1">&#39;region&#39;</span><span class="p">:</span> <span class="s1">&#39;global&#39;</span><span class="p">,</span> <span class="s1">&#39;a0&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">1.155</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mf">.66</span>      <span class="c1"># see Sect. 2.3.1</span>
    <span class="p">},</span>
    <span class="c1"># secondary perils - here ad-hoc Pr(peril|trigger) = 1, see tutorial 3 for probabilistic case</span>
    <span class="s1">&#39;FF&#39;</span><span class="p">:{</span><span class="s1">&#39;trigger&#39;</span><span class="p">:</span> <span class="s1">&#39;RS&#39;</span><span class="p">},</span>
    <span class="s1">&#39;LS&#39;</span><span class="p">:{</span><span class="s1">&#39;trigger&#39;</span><span class="p">:</span> <span class="s1">&#39;RS&#39;</span><span class="p">},</span>
    <span class="s1">&#39;SS&#39;</span><span class="p">:{</span><span class="s1">&#39;trigger&#39;</span><span class="p">:</span> <span class="s1">&#39;TC&#39;</span><span class="p">}</span>
<span class="p">}</span>

<span class="n">evtable</span><span class="p">,</span> <span class="n">evchar</span> <span class="o">=</span> <span class="n">GenMR_perils</span><span class="o">.</span><span class="n">gen_eventset</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">sizeDistr</span><span class="p">)</span>
<span class="n">evtable</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/arnaudmignan/Documents/GmbH_MRA/2_fundedR&amp;D/2025-2027_GenMR_SCOR/GenMR_SCOR/GenMR/perils.py:336: RuntimeWarning: divide by zero encountered in divide
  wi = 1 / np.array([np.count_nonzero(Si_ind_vec == i) for i in Si_ind])
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>srcID</th>
      <th>evID</th>
      <th>S</th>
      <th>lbd</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>AI</td>
      <td>impact1</td>
      <td>AI1</td>
      <td>10.000000</td>
      <td>1.258426e-05</td>
    </tr>
    <tr>
      <th>1</th>
      <td>AI</td>
      <td>impact2</td>
      <td>AI2</td>
      <td>10.000000</td>
      <td>1.258426e-05</td>
    </tr>
    <tr>
      <th>2</th>
      <td>AI</td>
      <td>impact3</td>
      <td>AI3</td>
      <td>10.000000</td>
      <td>1.258426e-05</td>
    </tr>
    <tr>
      <th>3</th>
      <td>AI</td>
      <td>impact4</td>
      <td>AI4</td>
      <td>100.000000</td>
      <td>1.188199e-06</td>
    </tr>
    <tr>
      <th>4</th>
      <td>AI</td>
      <td>impact5</td>
      <td>AI5</td>
      <td>100.000000</td>
      <td>1.188199e-06</td>
    </tr>
    <tr>
      <th>5</th>
      <td>AI</td>
      <td>impact6</td>
      <td>AI6</td>
      <td>100.000000</td>
      <td>1.188199e-06</td>
    </tr>
    <tr>
      <th>6</th>
      <td>AI</td>
      <td>impact7</td>
      <td>AI7</td>
      <td>100.000000</td>
      <td>1.188199e-06</td>
    </tr>
    <tr>
      <th>7</th>
      <td>AI</td>
      <td>impact8</td>
      <td>AI8</td>
      <td>1000.000000</td>
      <td>1.994471e-07</td>
    </tr>
    <tr>
      <th>8</th>
      <td>AI</td>
      <td>impact9</td>
      <td>AI9</td>
      <td>1000.000000</td>
      <td>1.994471e-07</td>
    </tr>
    <tr>
      <th>9</th>
      <td>AI</td>
      <td>impact10</td>
      <td>AI10</td>
      <td>1000.000000</td>
      <td>1.994471e-07</td>
    </tr>
    <tr>
      <th>10</th>
      <td>EQ</td>
      <td>fault1</td>
      <td>EQ1</td>
      <td>6.000000</td>
      <td>7.692251e-03</td>
    </tr>
    <tr>
      <th>11</th>
      <td>EQ</td>
      <td>fault2</td>
      <td>EQ2</td>
      <td>6.000000</td>
      <td>7.692251e-03</td>
    </tr>
    <tr>
      <th>12</th>
      <td>EQ</td>
      <td>fault1</td>
      <td>EQ3</td>
      <td>6.000000</td>
      <td>7.692251e-03</td>
    </tr>
    <tr>
      <th>13</th>
      <td>EQ</td>
      <td>fault1</td>
      <td>EQ4</td>
      <td>6.100000</td>
      <td>6.110172e-03</td>
    </tr>
    <tr>
      <th>14</th>
      <td>EQ</td>
      <td>fault1</td>
      <td>EQ5</td>
      <td>6.100000</td>
      <td>6.110172e-03</td>
    </tr>
    <tr>
      <th>15</th>
      <td>EQ</td>
      <td>fault1</td>
      <td>EQ6</td>
      <td>6.100000</td>
      <td>6.110172e-03</td>
    </tr>
    <tr>
      <th>16</th>
      <td>EQ</td>
      <td>fault1</td>
      <td>EQ7</td>
      <td>6.200000</td>
      <td>7.280223e-03</td>
    </tr>
    <tr>
      <th>17</th>
      <td>EQ</td>
      <td>fault1</td>
      <td>EQ8</td>
      <td>6.200000</td>
      <td>7.280223e-03</td>
    </tr>
    <tr>
      <th>18</th>
      <td>EQ</td>
      <td>fault1</td>
      <td>EQ9</td>
      <td>6.300000</td>
      <td>3.855258e-03</td>
    </tr>
    <tr>
      <th>19</th>
      <td>EQ</td>
      <td>fault1</td>
      <td>EQ10</td>
      <td>6.300000</td>
      <td>3.855258e-03</td>
    </tr>
    <tr>
      <th>20</th>
      <td>EQ</td>
      <td>fault1</td>
      <td>EQ11</td>
      <td>6.300000</td>
      <td>3.855258e-03</td>
    </tr>
    <tr>
      <th>21</th>
      <td>EQ</td>
      <td>fault1</td>
      <td>EQ12</td>
      <td>6.400000</td>
      <td>4.593510e-03</td>
    </tr>
    <tr>
      <th>22</th>
      <td>EQ</td>
      <td>fault1</td>
      <td>EQ13</td>
      <td>6.400000</td>
      <td>4.593510e-03</td>
    </tr>
    <tr>
      <th>23</th>
      <td>EQ</td>
      <td>fault2</td>
      <td>EQ14</td>
      <td>6.500000</td>
      <td>3.648755e-03</td>
    </tr>
    <tr>
      <th>24</th>
      <td>EQ</td>
      <td>fault1</td>
      <td>EQ15</td>
      <td>6.500000</td>
      <td>3.648755e-03</td>
    </tr>
    <tr>
      <th>25</th>
      <td>EQ</td>
      <td>fault1</td>
      <td>EQ16</td>
      <td>6.600000</td>
      <td>5.796618e-03</td>
    </tr>
    <tr>
      <th>26</th>
      <td>EQ</td>
      <td>fault1</td>
      <td>EQ17</td>
      <td>6.700000</td>
      <td>4.604417e-03</td>
    </tr>
    <tr>
      <th>27</th>
      <td>EQ</td>
      <td>fault1</td>
      <td>EQ18</td>
      <td>6.800000</td>
      <td>3.657419e-03</td>
    </tr>
    <tr>
      <th>28</th>
      <td>EQ</td>
      <td>fault1</td>
      <td>EQ19</td>
      <td>6.900000</td>
      <td>2.905191e-03</td>
    </tr>
    <tr>
      <th>29</th>
      <td>EQ</td>
      <td>fault1</td>
      <td>EQ20</td>
      <td>7.000000</td>
      <td>2.307675e-03</td>
    </tr>
    <tr>
      <th>30</th>
      <td>RS</td>
      <td>atmosphere</td>
      <td>RS1</td>
      <td>75.000000</td>
      <td>5.249839e-03</td>
    </tr>
    <tr>
      <th>31</th>
      <td>RS</td>
      <td>atmosphere</td>
      <td>RS2</td>
      <td>100.000000</td>
      <td>5.006848e-04</td>
    </tr>
    <tr>
      <th>32</th>
      <td>RS</td>
      <td>atmosphere</td>
      <td>RS3</td>
      <td>125.000000</td>
      <td>3.425633e-05</td>
    </tr>
    <tr>
      <th>33</th>
      <td>TC</td>
      <td>stormtrack1</td>
      <td>TC1</td>
      <td>40.000000</td>
      <td>6.049596e-04</td>
    </tr>
    <tr>
      <th>34</th>
      <td>TC</td>
      <td>stormtrack2</td>
      <td>TC2</td>
      <td>50.000000</td>
      <td>3.677710e-04</td>
    </tr>
    <tr>
      <th>35</th>
      <td>TC</td>
      <td>stormtrack3</td>
      <td>TC3</td>
      <td>60.000000</td>
      <td>9.923821e-05</td>
    </tr>
    <tr>
      <th>36</th>
      <td>TC</td>
      <td>stormtrack4</td>
      <td>TC4</td>
      <td>60.000000</td>
      <td>9.923821e-05</td>
    </tr>
    <tr>
      <th>37</th>
      <td>TC</td>
      <td>stormtrack5</td>
      <td>TC5</td>
      <td>70.000000</td>
      <td>8.826349e-05</td>
    </tr>
    <tr>
      <th>38</th>
      <td>VE</td>
      <td>volcano1</td>
      <td>VE1</td>
      <td>1.000000</td>
      <td>1.793957e-06</td>
    </tr>
    <tr>
      <th>39</th>
      <td>VE</td>
      <td>volcano1</td>
      <td>VE2</td>
      <td>3.162278</td>
      <td>8.390967e-07</td>
    </tr>
    <tr>
      <th>40</th>
      <td>VE</td>
      <td>volcano1</td>
      <td>VE3</td>
      <td>10.000000</td>
      <td>3.924750e-07</td>
    </tr>
    <tr>
      <th>41</th>
      <td>FF</td>
      <td>river</td>
      <td>FF_fromRS1</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>42</th>
      <td>FF</td>
      <td>river</td>
      <td>FF_fromRS2</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>43</th>
      <td>FF</td>
      <td>river</td>
      <td>FF_fromRS3</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>44</th>
      <td>LS</td>
      <td>terrain</td>
      <td>LS_fromRS1</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>45</th>
      <td>LS</td>
      <td>terrain</td>
      <td>LS_fromRS2</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>46</th>
      <td>LS</td>
      <td>terrain</td>
      <td>LS_fromRS3</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>47</th>
      <td>SS</td>
      <td>coastline</td>
      <td>SS_fromTC1</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>48</th>
      <td>SS</td>
      <td>coastline</td>
      <td>SS_fromTC2</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>49</th>
      <td>SS</td>
      <td>coastline</td>
      <td>SS_fromTC3</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>50</th>
      <td>SS</td>
      <td>coastline</td>
      <td>SS_fromTC4</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>51</th>
      <td>SS</td>
      <td>coastline</td>
      <td>SS_fromTC5</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>ADD plot showing modelled size distributions…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## move to function to plot stochastic events for selected peril...</span>

<span class="n">EQcoord</span> <span class="o">=</span> <span class="n">evchar</span><span class="p">[</span><span class="n">GenMR_perils</span><span class="o">.</span><span class="n">get_peril_evID</span><span class="p">(</span><span class="n">evchar</span><span class="p">[</span><span class="s1">&#39;evID&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;EQ&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">EQi</span> <span class="o">=</span> <span class="n">evtable</span><span class="p">[</span><span class="n">evtable</span><span class="p">[</span><span class="s1">&#39;ID&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;EQ&#39;</span><span class="p">][</span><span class="s1">&#39;evID&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;font.size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;18&#39;</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">sizeDistr</span><span class="p">[</span><span class="s1">&#39;EQ&#39;</span><span class="p">][</span><span class="s1">&#39;Nstoch&#39;</span><span class="p">]):</span>
    <span class="n">EQcoord_evID</span> <span class="o">=</span> <span class="n">EQcoord</span><span class="p">[</span><span class="n">EQcoord</span><span class="p">[</span><span class="s1">&#39;evID&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">EQi</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">contourf</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">xx</span><span class="p">,</span> <span class="n">grid</span><span class="o">.</span><span class="n">yy</span><span class="p">,</span> <span class="n">GenMR_env</span><span class="o">.</span><span class="n">ls</span><span class="o">.</span><span class="n">hillshade</span><span class="p">(</span><span class="n">topoLayer</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="n">vert_exag</span><span class="o">=</span><span class="mf">.1</span><span class="p">),</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">.1</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">EQcoord_evID</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">EQcoord_evID</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;darkred&#39;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">xmin</span><span class="p">,</span> <span class="n">grid</span><span class="o">.</span><span class="n">xmax</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">ymin</span><span class="p">,</span> <span class="n">grid</span><span class="o">.</span><span class="n">ymax</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;$x$ (km)&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;$y$ (km)&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">EQi</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">pad</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">pause</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>   <span class="c1"># to avoid rare case where plot not displayed on notebook</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/5632b1fefab0d523657fd10397662965fc39c7036a59d131305574e491ae1a75.png" src="../_images/5632b1fefab0d523657fd10397662965fc39c7036a59d131305574e491ae1a75.png" />
</div>
</div>
</section>
<section id="intensity-footprint-catalogue-generation">
<h3>1.3. Intensity footprint catalogue generation<a class="headerlink" href="#intensity-footprint-catalogue-generation" title="Link to this heading"></a></h3>
<p>Once the stochastic event set has been generated, the next step is to generate one hazard intensity footprint per event.</p>
<section id="from-analytical-expressions-threshold-models">
<h4>1.3.1. From analytical expressions &amp; threshold models<a class="headerlink" href="#from-analytical-expressions-threshold-models" title="Link to this heading"></a></h4>
<p>Analytical expressions are available to calculate intensity <span class="math notranslate nohighlight">\(I(x,y) = f_I(S,r)\)</span> for <code class="docutils literal notranslate"><span class="pre">AI</span></code>/<code class="docutils literal notranslate"><span class="pre">Ex</span></code>, <code class="docutils literal notranslate"><span class="pre">EQ</span></code>, <code class="docutils literal notranslate"><span class="pre">VE</span></code> and <code class="docutils literal notranslate"><span class="pre">WS</span></code>/<code class="docutils literal notranslate"><span class="pre">TC</span></code> (Mignan, 2024:sec. 2.4.1). Size <span class="math notranslate nohighlight">\(S\)</span> is available in <code class="docutils literal notranslate"><span class="pre">stochset</span></code> while distance to source <span class="math notranslate nohighlight">\(r\)</span> requires to match each event to a source. The match between event and source location is here direct for <code class="docutils literal notranslate"><span class="pre">AI</span></code> and <code class="docutils literal notranslate"><span class="pre">WS</span></code>, where one event occurs per stochastic source. For <code class="docutils literal notranslate"><span class="pre">VE</span></code>, all events occur on the same volcano source. The case of earthquakes is the most complicated since they need to be distributed along the 3 fault segments according to their magnitude (which converts into rupture length).</p>
<p>Equations are taken from Mignan (2024:sec. 2.4.1). Models are defined as <code class="docutils literal notranslate"><span class="pre">calc_I_*(S,r)</span></code> in the Python file.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p>ID</p></th>
<th class="head text-left"><p>Event size <span class="math notranslate nohighlight">\(S\)</span></p></th>
<th class="head text-left"><p>Intensity <span class="math notranslate nohighlight">\(I\)</span></p></th>
<th class="head text-left"><p>Equation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">AI</span></code>, <code class="docutils literal notranslate"><span class="pre">Ex</span></code></p></td>
<td class="text-left"><p>Explosive mass <span class="math notranslate nohighlight">\(m_{TNT}\)</span> (kt)</p></td>
<td class="text-left"><p>Blast overpressure <span class="math notranslate nohighlight">\(P\)</span> (kPa)</p></td>
<td class="text-left"><p>Eq. 2.56</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">EQ</span></code></p></td>
<td class="text-left"><p>Magnitude <span class="math notranslate nohighlight">\(M\)</span></p></td>
<td class="text-left"><p>Peak ground acceleration PGA (m/s<span class="math notranslate nohighlight">\(^2\)</span>)</p></td>
<td class="text-left"><p>Eq. 2.54</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">TC</span></code></p></td>
<td class="text-left"><p>Maximum wind speed <span class="math notranslate nohighlight">\(v_{max}\)</span> (m/s)</p></td>
<td class="text-left"><p>Wind speed <span class="math notranslate nohighlight">\(v\)</span> (m/s)</p></td>
<td class="text-left"><p>Eq. 2.24</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">VE</span></code></p></td>
<td class="text-left"><p>Erupted volume <span class="math notranslate nohighlight">\(V\)</span> (km<span class="math notranslate nohighlight">\(^3\)</span>)</p></td>
<td class="text-left"><p>Ash load <span class="math notranslate nohighlight">\(P\)</span> (kPa) (converted from thickness (m))</p></td>
<td class="text-left"><p>Eq. 2.61</p></td>
</tr>
</tbody>
</table>
<p>Storm surge (<code class="docutils literal notranslate"><span class="pre">SS</span></code>) is the only peril here for which hazard intensity is estimated from a threshold model (Bathtub model; Mignan, 2024:sec. 2.4.2). The algorithm is kept very simple, and only applies to the present virtual environment where the background topography has an overall West-East orientation (see function <code class="docutils literal notranslate"><span class="pre">model_SS_Bathtub()</span></code>). As a secondary peril triggered by <code class="docutils literal notranslate"><span class="pre">TC</span></code> events, the <code class="docutils literal notranslate"><span class="pre">SS</span></code> size along the coastline is simply taken from a relationship of the form <span class="math notranslate nohighlight">\(h_{max} \propto v_{max}^2\)</span> (Mignan, 2024:fig. 2.7) with <span class="math notranslate nohighlight">\(v_{max}\)</span> the wind speed along the coastline according to the <code class="docutils literal notranslate"><span class="pre">TC</span></code> footprint.</p>
<p>The catalogue of hazard footprints is generated with the function <code class="docutils literal notranslate"><span class="pre">gen_hazFootprints()</span></code> and plotted with <code class="docutils literal notranslate"><span class="pre">plot_hazFootprints()</span></code>. The rupture coordinates of the stochastic earthquakes are computed in <code class="docutils literal notranslate"><span class="pre">gen_EQ_floatingRupture()</span></code>. The earthquake ruptures are shown below in dark red (rerun cell for different samples):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># additional atmospheric source parameters -&gt; CONSIDER MOVING TO NEW ENV. LAYER</span>
<span class="n">src</span><span class="o">.</span><span class="n">par</span><span class="p">[</span><span class="s1">&#39;TC&#39;</span><span class="p">][</span><span class="s1">&#39;vforward_m/s&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># forward storm speed [m/s]    </span>
<span class="n">src</span><span class="o">.</span><span class="n">par</span><span class="p">[</span><span class="s1">&#39;TC&#39;</span><span class="p">][</span><span class="s1">&#39;pn_mbar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1005</span>     <span class="c1"># ambient pressure [mbar]</span>
<span class="n">src</span><span class="o">.</span><span class="n">par</span><span class="p">[</span><span class="s1">&#39;TC&#39;</span><span class="p">][</span><span class="s1">&#39;B_Holland&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>      <span class="c1"># Holland&#39;s parameter (see Fig. 2.10 of textbook)</span>
<span class="n">src</span><span class="o">.</span><span class="n">par</span><span class="p">[</span><span class="s1">&#39;TC&#39;</span><span class="p">][</span><span class="s1">&#39;lat_deg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">lat_deg</span>   <span class="c1"># average latitude of digital template (see Tutorial 1)</span>

<span class="c1"># virtual region bathymetry characteristics for SS height given storm wind speed</span>
<span class="n">src</span><span class="o">.</span><span class="n">par</span><span class="p">[</span><span class="s1">&#39;SS&#39;</span><span class="p">][</span><span class="s1">&#39;bathy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;New York harbor&#39;</span>  <span class="c1"># &#39;generic&#39; (Saffir-Simpson, Mignan, 2024:eq. 2.16) </span>
                                            <span class="c1"># &#39;New York harbor&#39; (Eq. in Mignan, 2024:fig. 2.7)</span>
    
<span class="c1">#catalog_hazFootprints = GenMR_perils.gen_hazFootprints(stochset, src, grid, topoLayer.z)</span>

<span class="c1">#hazFp_static = GenMR_events.hazFootprints_static(src, evPar, evTable)</span>


<span class="c1">#print(catalog_hazFootprints.keys()) # footprints are catalogued by evID</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="from-numerical-models-cellular-automata">
<h4>1.3.2. From numerical models (cellular automata)<a class="headerlink" href="#from-numerical-models-cellular-automata" title="Link to this heading"></a></h4>
<p>TO DEVELOP</p>
</section>
</section>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading"></a></h2>
<p>TO ADD</p>
</section>
<section id="appendix">
<h2>Appendix<a class="headerlink" href="#appendix" title="Link to this heading"></a></h2>
<p>ADD TABLE giving source class properties</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Tutorial1_DigitalTemplate_environment.html" class="btn btn-neutral float-left" title="Tutorial 1: Generating a virtual environment for the GenMR digital template" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Arnaud Mignan.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>